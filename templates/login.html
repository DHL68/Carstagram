<!doctype html>
<html lang="en">
<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Bulma CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.9.1/css/bulma.min.css">
    <!-- Font Awesome CSS -->
    <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">

    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Gamja+Flower&family=Stylish&display=swap" rel="stylesheet">

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">

    <!-- Jquery -->
    <script src="http://code.jquery.com/jquery-latest.min.js"></script>
    <!-- CSS -->
    <link rel="stylesheet" href="../static/style/login_style.css" type="text/css">
    <!-- @media 나중에 -->
    <link rel="stylesheet" media="screen and (max-width: 768px)" href="/style/login_style.css"/>
    <!-- JS -->
    <!--    <script src="../static/script/login.js"></script>-->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.js"></script>

    <title>Carstagram</title>
    <script>
        // 로그아웃은 내가 가지고 있는 토큰만 쿠키에서 없애면 됩니다.
        function logout() {
            $.removeCookie('mytoken');
            alert('로그아웃!')
            window.location.href = '/login'
        }

        // 로그인 클라이언트
        function sign_in() {
            let useremail = $("#useremail").val()
            let password = $("#userpw").val()

            if (useremail == "") {
                $("#help-email-login").text("아이디를 입력해주세요.")
                $("#useremail").focus()
                return;
            } else {
                $("#help-email-login").text("")
            }

            if (password == "") {
                $("#help-password-login").text("비밀번호를 입력해주세요.")
                $("#userpw").focus()
                return;
            } else {
                $("#help-password-login").text("")
            }
            $.ajax({
                type: "POST",
                url: "/api/login",
                data: {
                    useremail_give: useremail,
                    password_give: password
                },

                success: function (response) {
                    if (response['result'] == 'success') {
                        $.cookie('mytoken', response['token'], {path: '/'});
                        console.log(response)
                        window.location.replace('/main')
                    } else {
                        alert(response['msg'])
                    }
                }
            });
        }
    </script>
</head>
<!--body 레이아웃-->
<body style="background-image: linear-gradient(70deg, rgba(0, 0, 0, 0.6), rgba(0, 0, 0, 0.4)),url(/static/image/background.jpg);">
<div style="display: flex; flex-direction: column; align-items: center; width: 100%; animation: showText 2s;">
    <div style="padding: 20px ;text-align: center; width: 350px; height: 400px; margin-top: 200px; opacity:0.8; background: white">
        <div style="padding-top: 30px; padding-bottom: 40px"><img style="width: 190px; height: 70px"
                                                                  src="/static/image/Carstagram_rogo.png">
        </div>
        <!--로그인 폼 레이아웃-->
        <div style="font-weight: bold; color: gray;padding-bottom: 20px"> 친구들의 사진과 동영상을 보려면 로그인하세요.</div>
        <div>
            <div class="form-floating mb-3" style="display: flex">
                <input type="email" class="form-control" style="font-size: 14px; width: 258px; height: 36px; "
                       id="useremail">
                <label for="useremail" style="font-size: 14px;padding: 4px 10px">이메일 주소</label>
                <div id="btn-check-dup" class="control is-hidden">
                    <button class="button is-sparta" onclick="check_dup()">중복확인</button>
                </div>
                <p class="help-email-login" id="help-email-login"></p>
            </div>
        </div>
        <div>
            <div class="form-floating mb-3">
                <input type="password" class="form-control" style="font-size: 14px; width: 258px; height: 36px;"
                       id="userpw">
                <label for="userpw" style="font-size: 14px;padding: 4px 10px">비밀번호</label>
                <p class="help-password-login" id="help-password-login"></p>
            </div>
        </div>
        <button id="" class="btn btn-primary" style="width: 258px; height: 36px; padding: 4px 10px" onclick="sign_in()">
            로그인
        </button>
    </div>
    <div style="padding: 20px ;text-align: center; width: 350px; height: 65px; margin-top: 30px; opacity:0.8; background: white">
        <div> 계정이 없으신가요? <a href="/sign_up">회원가입</a></div>
    </div>
</div>


<!-- Optional JavaScript; choose one of the two! -->
<!--<script>-->
<!--    $('#login_button').click(function () {-->

<!--        let email = $('#input_email').val();-->
<!--        let password = $('#input_password').val();-->

<!--        $.ajax({-->
<!--            url: "/user/login",-->
<!--            data: {-->
<!--                email: email,-->
<!--                password: password-->
<!--            },-->
<!--            method: "POST",-->
<!--            success: function (data) {-->
<!--                console.log("성공");-->
<!--                alert("로그인 성공");-->
<!--                location.replace('/main');-->

<!--            },-->
<!--            error: function (request, status, error) {-->
<!--                console.log("에러");-->
<!--            },-->
<!--            complete: function () {-->
<!--                console.log("완료");-->
<!--            }-->
<!--        });-->
<!--    });-->


</script>
<!-- Option 1: Bootstrap Bundle with Popper -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p"
        crossorigin="anonymous"></script>

<!-- Option 2: Separate Popper and Bootstrap JS -->
<!--
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.10.2/dist/umd/popper.min.js" integrity="sha384-7+zCNj/IqJ95wo16oMtfsKbZ9ccEh31eOz1HGyDuCQ6wgnyJNSYdrPa03rtR1zdB" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.min.js" integrity="sha384-QJHtvGhmr9XOIpI6YVutG+2QOK9T+ZnN4kzFN1RtK3zEFEIsxhlmWl5/YESvpZ13" crossorigin="anonymous"></script>
-->

</body>
</html>